
/* 
	@name: ENT_TFV300
	@functional: http://confluence.mtvi.com/display/ENT/ENT_TFV300
	@styleguide: http://confluence.mtvi.com/display/ENT/Javascript+Style+Guide
	@author: $Author: fedarovs $
*/

$Crabapple.TriforceView_ent_tfv300_v1 = function() {};
$Crabapple.extend($Crabapple.TriforceView, $Crabapple.TriforceView_ent_tfv300_v1, {
	coreElement: null,

	/**
	 * Generates core element
	 */
	generateCoreElement: function(trackingClass) {
		if (!trackingClass && this.options && this.options.trackingClass) {
			trackingClass = this.options.trackingClass;
		}

		this.coreElement = this.getModuleWrapper(this.moduleElement, trackingClass);
	},

	/**
	 * Enhances the view(in that case just sets coreElement)
	 * @param coreElement
	 */
	enhance: function (coreElement) {
		this.coreElement = coreElement;
	},

	/**
	 * Sets output(core element) to the page
	 * Depending on the 'mode' it replaces the module element with core element or just does 'append'.
	 */
	setOutput: function() {
		if (this.mode !== 'append') {
			this.moduleElement = this.replaceModuleElement(this.moduleElement, this.coreElement);
		} else {
			this.moduleElement.append(this.coreElement);
		}

		return this.moduleElement.show();
	}
});
/*
 @name: ENT_M051 - Basic Promo
 @functional: https://confluence.mtvi.com/display/ENT/ENT_M051+-+Basic+Promo
 @styleguide: http://confluence.mtvi.com/display/ENT/Javascript+Style+Guide
 @author: $Author: fedarovs $
 */


$Crabapple.TriforceModule_ent_m051_v1 = function() {};
$Crabapple.extend($Crabapple.TriforceModule, $Crabapple.TriforceModule_ent_m051_v1, {
    viewName: '$Crabapple.TriforceView_ent_m051_v1',

    initializeView: function () {
        var feed = this.feedResponse.result;

        this.view.generateCoreElement();
        this.view.render(feed.promo);

        this.moduleElement = this.view.setOutput();
    }
});
/*
 @name: ENT_M051 - Basic Promo
 @functional: https://confluence.mtvi.com/display/ENT/ENT_M051+-+Basic+Promo
 @styleguide: http://confluence.mtvi.com/display/ENT/Javascript+Style+Guide
 @author: $Author: fedarovs $
 */


$Crabapple.TriforceView_ent_m051_v1 = {
    parentView: '$Crabapple.TriforceView_ent_tfv300_v1',
    extention: {
        render: function (data) {
            this.generateBasicPromo(data);
        },

        generateBasicPromo: function (data) {
            var promo = data,
                module = this.appendDom(this.coreElement, 'div', {}),
                anchor = this.appendDom(module, 'a', {
                    'href': (promo.featuredUrls) ? promo.featuredUrls[0] : ''
                }),
                headline,
                content,
                sponsor;

            // thumbnail image
            if ( promo.images && promo.images[0]) {
                this.appendImage(anchor, promo.images[0]);
            }

            // check for content
            if ( promo.headline || promo.subHeadline || promo.copy ) {
                content = this.appendDom(anchor, 'div', { 'class': 'content'});
            }

            // header text
            if ( promo.headline ) {
                headline = this.appendDom(content, 'div');
                this.appendDom(headline, 'span').text(promo.headline);
            }

            // subheader text
            if ( promo.subHeadline ) {
                this.appendDom(content, 'h3', {}).text(promo.subHeadline);
            }

            // copy
            if ( promo.copy ) {
                this.appendDom(content, 'p', {}).text(promo.copy);
            }

            // sponsor logo
            if ( promo.parameters && promo.parameters.adSize ) {
                sponsor = this.appendDom(this.coreElement, 'div', { 'class': 'sponsor' });
                this.appendDom(sponsor, 'span', {}).text('Brought to you by:');
                this.appendDom(sponsor, 'span', {
                    'data-adsize': promo.parameters.adSize,
                    'data-campaign': promo.parameters.campaign ? promo.parameters.campaign : ''
                });
            }
        }
    }
};
/*
 @name: ENT_M051_VH1 - Basic Promo
 @functional: https://confluence.mtvi.com/display/ENT/ENT_M051_VH1+-+Basic+Promo
 @styleguide: http://confluence.mtvi.com/display/ENT/Javascript+Style+Guide
 @author: $Author: saterfij $
 */
$Crabapple.TriforceModule_ent_m051_vh1_V1_0_0 = function() {};
$Crabapple.extend($Crabapple.TriforceModule_ent_m051_v1, $Crabapple.TriforceModule_ent_m051_vh1_V1_0_0, {
    viewName: '$Crabapple.TriforceView_ent_m051_vh1',

    applyCustomColor: function() {
        var customColors = window.$MTV.triforce.colorPicker(),
        moduleName = this.feedResponse.result.promo.promoType.toLowerCase(),
            shortId = "promo_" + this.feedResponse.result.promo.shortId,
            htmlString = "";

        if(customColors.primaryColor && customColors.secondaryColor && customColors.secondaryTextColor) {
            htmlString  += "." + moduleName + "." + shortId + " .content h3:hover { color: rgba(0, 0, 0, 0.6); }"
                        +  "." + moduleName + "." + shortId + " .content div {background: " + customColors.secondaryColor + "}"
                        +  "." + moduleName + "." + shortId + " .content div span {color: " + customColors.secondaryTextColor + "}";
        }

        if (htmlString != "") {
            this.view.moduleElement.addClass(shortId);
            var styleElement = document.getElementById(moduleName + '_' + shortId +'_colorsPallete') || document.createElement('style');
            styleElement.id = moduleName + '_' + shortId + '_colorsPallete';
            styleElement.innerHTML = htmlString;
            document.head.appendChild(styleElement);
        }
    },

    addEvents: function() {
        this.applyCustomColor();
    }
});
$Crabapple.TriforceView_ent_m051_vh1 = {
    parentView: '$Crabapple.TriforceView_ent_tfv300_v1',
    extention: {
        render: function (data) {
            this.generateBasicPromo(data);
        },

        generateBasicPromo: function (data) {
            var promo = data,
                module = this.appendDom(this.coreElement, 'div', {}),
                anchor = this.appendDom(module, 'a', {
                    'href': (promo.featuredUrls) ? promo.featuredUrls[0] : ''
                }),
                headline,
                content,
                sponsor;

            // thumbnail image
            if ( promo.images && promo.images[0]) {
                this.appendImage(anchor, promo.images[0]);
            }

            // check for content
            if ( promo.headline || promo.subHeadline || promo.copy ) {
                content = this.appendDom(anchor, 'div', { 'class': 'content'});
            }

            // header text
            if ( promo.headline ) {
                headline = this.appendDom(content, 'div', {'class': 'item_sticker'});
                this.appendDom(headline, 'span').text(promo.headline);
            }

            // subheader text
            if ( promo.subHeadline ) {
                this.appendDom(content, 'h3', {}).text(promo.subHeadline);
            }

            // copy
            if ( promo.copy ) {
                this.appendDom(content, 'p', {}).text(promo.copy);
            }

            // sponsor logo
            if ( promo.parameters && promo.parameters.adSize ) {
                sponsor = this.appendDom(this.coreElement, 'div', { 'class': 'sponsor' });

                this.appendDom(sponsor, 'span', {
                    'data-adsize': promo.parameters.adSize,
                    'data-campaign': promo.parameters.campaign ? promo.parameters.campaign : ''
                });
            }
        }
    }
};